ymaps.ready(function () {
    var myMap = new ymaps.Map("map", {
        zoom: 16,
        center: [43.676192, 40.302654],
        controls: [],
    });
    myMap.controls.add("geolocationControl", {
        float: "none",
        position: {
            top: "16px",
            left: "16px",
        },
    });
    myMap.controls.add("zoomControl", {
        float: "none",
        position: {
            top: "250px",
            right: "15px",
        },
    });
    myMap.controls.add("typeSelector", {
        float: "none",
        position: {
            top: "16px",
            left: "64px",
        },
    });

    // Трэк

    // 1 часть
    var myPolyline1 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [43.6736882839447, 40.2982237447661],
            [43.6737369549158, 40.2982478846472],
            [43.6739452662232, 40.2984517325323],
            [43.673990043325, 40.2983015288275],
            [43.6740114584487, 40.2981727827948],
            [43.6740328735648, 40.2981701005858],
            [43.6742022473934, 40.2985938896101],
            [43.6742820670768, 40.2986797202986],
            [43.6743073757346, 40.298564385311],
            [43.674301535276, 40.2985214699667],
            [43.6742879075602, 40.2984678257864],
            [43.6742918012002, 40.2983605374258],
            [43.6743151630347, 40.2983229864996],
            [43.6743540994052, 40.29840345277],
            [43.6744417061688, 40.2984597791594],
            [43.6744689615729, 40.2984302748602],
            [43.6745020574041, 40.2983819950979],
            [43.6745565681447, 40.2981915582579],
            [43.6745624085782, 40.2981459607046],
            [43.6745935575474, 40.2981513251226],
            [43.674632493736, 40.2982532490652],
            [43.6746753235141, 40.2984892834585],
            [43.6747298341191, 40.2985938896101],
            [43.6747570893915, 40.2986931313437],
            [43.674751248977, 40.2987387288969],
            [43.6747259405078, 40.298942576782],
            [43.6747921318662, 40.2990847338598],
            [43.6748563763497, 40.2994468320768],
            [43.6748446955397, 40.2995728959005],
            [43.6749108867891, 40.2997821082037],
            [43.6749206207868, 40.299838434593],
            [43.6748135467247, 40.3003614653509],
            [43.6747220469191, 40.3005304445188],
            [43.6747629298284, 40.3008201230924],
            [43.6748641635781, 40.3009756912153],
            [43.6748758443843, 40.3010212887686],
            [43.6749050464128, 40.3012412299078],
            [43.6748972592127, 40.3013163317602],
            [43.6748680572034, 40.3013967980307],
            [43.6748933656123, 40.3014826287191],
            [43.675000439531, 40.3018661846083],
            [43.6750374286582, 40.3021236766737],
            [43.6750899921153, 40.3021612275999],
            [43.6752009592613, 40.3022953380507],
            [43.6752571846507, 40.3023240345075],
            [43.6755569893079, 40.3023669498517],
            [43.6757107846181, 40.3025117891386],
            [43.6757380394418, 40.3025198357656],
            [43.6758976745874, 40.3023964541509],
            [43.6759502373086, 40.3023267167165],
            [43.6759891726337, 40.3023079412534],
            [43.676055362589, 40.3023025768354],
            [43.676154647384, 40.3023562210156],
            [43.6761682747418, 40.30242595845],
            [43.6761887157038, 40.3024219351365],
            [43.6762188904445, 40.302246250446],
            [43.6762461450357, 40.3022060173108],
            [43.6762928671632, 40.3021805363252],
            [43.6763210950975, 40.3021778541161],
            [43.6763999385902, 40.3021912651612],
            [43.6765371844043, 40.3021376209809],
            [43.6769703339871, 40.3019525485588],
            [43.6770540434452, 40.3019337730957],
            [43.6771533265762, 40.3019552307678],
            [43.6771844741911, 40.301984735067],
            [43.6772039414421, 40.3020491080833],
            [43.6770890845921, 40.3024326639725],
            [43.6770637771157, 40.3025962787224],
            [43.6770910313206, 40.3026526051117],
            [43.6771358060586, 40.3026633339477],
            [43.6771883676647, 40.3025828676773],
            [43.6772214619855, 40.3025453167511],
            [43.677260396457, 40.3025453167511],
            [43.6773032243463, 40.3025962787224],
            [43.6773849866179, 40.3026177363944],
            [43.6774258677001, 40.3027947621894],
            [43.677455068456, 40.3028323131156],
            [43.6776516865061, 40.3029959278655],
            [43.6777198213226, 40.3031112628532],
            [43.6777451285432, 40.3032158690048],
            [43.677916438522, 40.3033258395744],
            [43.6780215603336, 40.3034894543243],
            [43.6780390806136, 40.3035591917587],
            [43.6780507607975, 40.3037764506889],
            [43.6780604942823, 40.3038944678855],
            [43.6782103897702, 40.3040983157707],
            [43.6783232977936, 40.304337032373],
            [43.6782512702862, 40.3046884017539],
            [43.6782103897702, 40.3047500925613],
            [43.6781636691463, 40.3047500925613],
            [43.6779281187758, 40.3047286348892],
            [43.6778872380382, 40.3047500925613],
            [43.6778444105916, 40.3047930079055],
            [43.6777626489734, 40.3048171477866],
            [43.6775835517035, 40.3047366815162],
            [43.6774025071999, 40.3047930079055],
            [43.6773265851379, 40.3048439698767],
            [43.6772292490196, 40.3048520165038],
            [43.6771046585561, 40.3048251944137],
            [43.6768360095056, 40.3048761563849],
            [43.6767776073728, 40.3049351649833],
            [43.6766646964435, 40.3049807625365],
            [43.6764778088799, 40.3049405294013],
            [43.6762636661822, 40.304707177217],
            [43.6761118190595, 40.3046240287375],
            [43.6760806708839, 40.3045650201392],
            [43.676063150028, 40.3044684606146],
            [43.676063150028, 40.3043075280737],
            [43.6759794392009, 40.3041036801886],
            [43.675899621791, 40.3040393071722],
            [43.6757983898234, 40.3039802985739],
            [43.6755200009624, 40.3039642053198],
            [43.6754109811939, 40.304004438455],
            [43.6750410912303, 40.3039132433485],
            [43.6748327837536, 40.3037308531354],
            [43.6747568584174, 40.3036369758199],
            [43.6746575712935, 40.303653069074],
            [43.6745641244374, 40.3036155181478],
            [43.6744005921097, 40.3036396580289],
            [43.6743597089519, 40.3036101537298],
            [43.6743480280445, 40.3035377340863],
            [43.6744336879788, 40.3034599500249],
            [43.6745193477899, 40.3033124285291],
            [43.6748522518189, 40.3030415254186],
            [43.6749067622391, 40.3030603008817],
            [43.6749262302343, 40.30311930948],
            [43.6750371976852, 40.3032534199308],
            [43.6750800271954, 40.3032507377218],
            [43.6751384309919, 40.3031273561071],
            [43.6750196765454, 40.3028457241605],
            [43.6748113689939, 40.3027089315007],
            [43.6746478373447, 40.3026874738286],
            [43.6744979329405, 40.3026338296483],
            [43.6743811240347, 40.3025211768697],
            [43.6743227194959, 40.3024272995542],
            [43.6742954640248, 40.3022261338781],
            [43.6742954640248, 40.3021510320256],
            [43.6743402408635, 40.3020115571569],
            [43.6743694431544, 40.3017460184644],
            [43.674367496337, 40.3014134245465],
            [43.6741144095309, 40.3011022883008],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline1);
                    },
                });
                return items;
            },
        }
    );

    // 2 часть
    var myPolyline2 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [43.6739406546919, 40.2984489130332],
            [43.6739669369099, 40.2984757351233],
            [43.6742049364908, 40.2989752965523],
            [43.674234138825, 40.2992079781844],
            [43.6741562659248, 40.299447365339],
            [43.6742414394523, 40.2998336034371],
            [43.6744877119179, 40.3004907446457],
            [43.6744424485092, 40.3007455545021],
            [43.6744487756576, 40.3008675950122],
            [43.6743694429249, 40.3014254944873],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // 3 часть
    var myPolyline3 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [43.6770852863465, 40.3024575765933],
            [43.6769422016182, 40.3025769348945],
            [43.6767348741573, 40.3027807827796],
            [43.6766433773249, 40.3029752429332],
            [43.6764691435858, 40.3032327349986],
            [43.6763484450386, 40.3035626467074],
            [43.6763474716851, 40.3036109264697],
            [43.6763688859617, 40.3036471362914],
            [43.6765976288904, 40.3038134332503],
            [43.6767475280585, 40.3040575142707],
            [43.6767553150168, 40.3040950651969],
            [43.6767465546886, 40.3041312750186],
            [43.676671605162, 40.3042922075595],
            [43.6766531111085, 40.3043163474406],
            [43.6766258567033, 40.3043203707541],
            [43.6763747262636, 40.3042640443648],
            [43.676153769539, 40.3041755314673],
            [43.675942545826, 40.3040695842112],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline3);
                    },
                });
                return items;
            },
        }
    );

    // Обозначение начала маршрута
    var startPoint = new ymaps.Placemark(
        [43.6736882839447, 40.2982237447661],
        {
            hintContent: "Начало маршрута",
            //   balloonContent: `Начало маршрута`,
        },
        {
            iconLayout: "default#image",
            iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
            iconImageSize: [32, 51],
            iconImageOffset: [-10, -45],
        }
    );

    // Добавляем линии на карту.
    myMap.geoObjects.add(myPolyline1).add(myPolyline2).add(myPolyline3).add(startPoint);

});

//Геолокация пользователя//
function init() {
    var geolocation = ymaps.geolocation,
        myMap = new ymaps.Map(
            "map",
            {
                center: [55, 34],
                zoom: 10,
            },
            {
                searchControlProvider: "yandex#search",
            }
        );

    // Сравним положение, вычисленное по ip пользователя и
    // положение, вычисленное средствами браузера.
    geolocation
        .get({
            provider: "yandex",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Красным цветом пометим положение, вычисленное через ip.
            result.geoObjects.options.set("preset", "islands#redCircleIcon");
            result.geoObjects.get(0).properties.set({
                balloonContentBody: "Мое местоположение",
            });
            myMap.geoObjects.add(result.geoObjects);
        });

    geolocation
        .get({
            provider: "browser",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Синим цветом пометим положение, полученное через браузер.
            // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
            result.geoObjects.options.set("preset", "islands#blueCircleIcon");
            myMap.geoObjects.add(result.geoObjects);
        });
}
