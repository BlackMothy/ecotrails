ymaps.ready(function () {
  var myMap = new ymaps.Map("map", {
    zoom: 14,
    center: [60.233258, 29.537608],
    controls: [],
  });
  myMap.controls.add("geolocationControl", {
    float: "none",
    position: {
      top: "16px",
      left: "16px",
    },
  });
  myMap.controls.add("zoomControl", {
    float: "none",
    position: {
      top: "250px",
      right: "15px",
    },
  });
  myMap.controls.add("typeSelector", {
    float: "none",
    position: {
      top: "16px",
      left: "64px",
    },
  });
  var myPolyline = new ymaps.Polyline(
    [
      // Указываем координаты вершин.

      [60.2422200351569, 29.5405737202671],
      [60.2421626953448, 29.5406515043285],
      [60.2420880200898, 29.5407024662998],
      [60.2419453365293, 29.540750746062],
      [60.2417639808349, 29.5407963436153],
      [60.2414452724313, 29.5409036319758],
      [60.2409892072873, 29.5410565178897],
      [60.2402837606206, 29.5415741842295],
      [60.2400543871572, 29.5417565744425],
      [60.2398490165252, 29.5418638628031],
      [60.2396783178816, 29.5418933671023],
      [60.2395702971851, 29.5418370407129],
      [60.2392755722238, 29.5414776247049],
      [60.2391595485491, 29.5413354676271],
      [60.2386314355702, 29.540774885943],
      [60.2379788691063, 29.5400845949502],
      [60.2373343506233, 29.5397051210357],
      [60.2365207942442, 29.5392652387573],
      [60.2356479063013, 29.5387765947679],
      [60.2353037966585, 29.5385351959565],
      [60.2351570821462, 29.5383152548173],
      [60.2348263051823, 29.5376447025636],
      [60.2345915582142, 29.5372316423753],
      [60.2343834856273, 29.536641556392],
      [60.2342794488277, 29.5363894287446],
      [60.2341887498169, 29.5361963096956],
      [60.2337459216174, 29.535010773311],
      [60.2336418827778, 29.5345816198685],
      [60.2335298405994, 29.5337447706559],
      [60.2334418071806, 29.5332834307053],
      [60.2333431027723, 29.532865006099],
      [60.2332817458185, 29.5326101962425],
      [60.2332630719429, 29.5325780097343],
      [60.2332363949592, 29.5325806919434],
      [60.2331046920193, 29.5326486844152],
      [60.2328739342615, 29.5327532905668],
      [60.2327645571868, 29.5327988881201],
      [60.2327165378675, 29.5328418034643],
      [60.2326298361401, 29.5328525323004],
      [60.2325684778464, 29.5328498500913],
      [60.2324951145287, 29.5328149813741],
      [60.2324204171631, 29.5327667016119],
      [60.2323523890566, 29.5326969641775],
      [60.232315040232, 29.5325682181448],
      [60.2322963658036, 29.5324421543211],
      [60.2322950319155, 29.5323241371244],
      [60.2323203757719, 29.5319808143705],
      [60.232321709659, 29.5318762082189],
      [60.2323137063356, 29.5318064707845],
      [60.2322870285765, 29.5318091529935],
      [60.2322470118969, 29.5318547505468],
      [60.2321949901403, 29.5319539922803],
      [60.2321389666173, 29.5321471113294],
      [60.2321042853317, 29.5324019211858],
      [60.2320911664212, 29.5326825567455],
      [60.2321138426539, 29.5329990574092],
      [60.2321551933904, 29.5333289691181],
      [60.2319751172197, 29.5334335752696],
      [60.2319497730863, 29.5334228464336],
      [60.2318844118096, 29.5333048292369],
      [60.2317656940449, 29.5331278034419],
      [60.2316803237068, 29.5331009813518],
      [60.2316096262175, 29.5331036635608],
      [60.2315616052003, 29.533151943323],
      [60.2315082484317, 29.5332163163394],
      [60.2314002007084, 29.5334308930606],
      [60.2313735222031, 29.5334523507327],
      [60.2309866814196, 29.5335891433924],
      [60.2307865895571, 29.5336106010646],
      [60.2306732036294, 29.5336454697817],
      [60.2303490510733, 29.5336588808268],
      [60.2301889745638, 29.5336535164088],
      [60.2300929282634, 29.5336749740809],
      [60.2296660524812, 29.533886868593],
      [60.2294832945725, 29.5341363140314],
      [60.2294392724439, 29.5341738649576],
      [60.2293805761801, 29.5341899582117],
      [60.2293325518858, 29.5341953226297],
      [60.2292204949155, 29.5341121741502],
      [60.2290470726701, 29.5339244195192],
      [60.2289016640598, 29.5337393470971],
      [60.2287842694947, 29.5335864611833],
      [60.2285107918831, 29.5331412144868],
      [60.2283240253603, 29.5326879211633],
      [60.2281786135405, 29.5323419162003],
      [60.2279865088625, 29.5317840167252],
      [60.2276836748937, 29.5309310742585],
      [60.2276356481047, 29.5307996460167],
      [60.2275862871557, 29.5306333490578],
      [60.2273901767383, 29.5300003477303],
      [60.2273047949552, 29.5297160335747],
      [60.2272127424801, 29.529415626165],
      [60.2271553763137, 29.5292868801323],
      [60.2271233579445, 29.5292707868782],
      [60.2270966759461, 29.5293297954765],
      [60.2269952841447, 29.5295551010338],
      [60.2269726043585, 29.5297374912468],
      [60.227017963906, 29.5303007551399],
      [60.2270499823695, 29.5309176632133],
      [60.2270606551867, 29.5310195871558],
      [60.2271940650985, 29.5315721222129],
      [60.2273381472012, 29.5318805762496],
      [60.2274101880051, 29.531950313684],
      [60.2274328674875, 29.5320227333274],
      [60.2274902331576, 29.5324304290977],
      [60.2275009058309, 29.5326155015197],
      [60.2274969035698, 29.5330419727531],
      [60.2274942354015, 29.5331707187858],
      [60.2274835627259, 29.533216316339],
      [60.2274542128411, 29.5333021470275],
      [60.2273608266973, 29.5336803384986],
      [60.2272594357157, 29.5343911238875],
      [60.2272581016128, 29.5344501324858],
      [60.2273221380558, 29.534841735002],
      [60.227402183424, 29.5353674479689],
      [60.2275849529578, 29.5359602161612],
      [60.2278344250177, 29.5363571830953],
      [60.2280372030792, 29.5366951414312],
      [60.2282132987957, 29.5369097181524],
      [60.228440087326, 29.5369848200048],
      [60.2286722104359, 29.5372262188161],
      [60.2288162860103, 29.537397880193],
      [60.2289710331514, 29.5376607366765],
      [60.2291044352709, 29.5377197452748],
      [60.2291577959481, 29.5377251096929],
      [60.229357897779, 29.5376124569143],
      [60.2295633343744, 29.5374676176274],
      [60.2297701036783, 29.5373710581029],
      [60.2298127913625, 29.5373496004307],
      [60.2300102212183, 29.5370947905743],
      [60.2303277072588, 29.5366388150418],
      [60.2305144623081, 29.5362901278698],
      [60.2309306554268, 29.5362391658985],
      [60.2315069140959, 29.5362364836895],
      [60.2318190499594, 29.5364027806484],
      [60.232104504932, 29.5365422555171],
      [60.232417968977, 29.536692459222],
      [60.2327514380538, 29.5369258114063],
      [60.233114248543, 29.5374434777461],
      [60.2332289598382, 29.5376258679591],
      [60.2331609333705, 29.5378779956064],
      [60.2330889052393, 29.5381918140612],
      [60.2330448879608, 29.5384680815897],
      [60.2330262139407, 29.5387684889994],
      [60.2330262139407, 29.5390045233927],
      [60.2330462218003, 29.539422947999],
      [60.2330715650738, 29.539594609376],
      [60.2332596382842, 29.5403000303469],
      [60.233427702789, 29.5408176966867],
      [60.2336757964342, 29.541415829297],
      [60.2337798351386, 29.5416545458993],
      [60.2339052146863, 29.5418825336656],
      [60.2340385966554, 29.5421212502679],
      [60.2342026557214, 29.5423331447801],
      [60.2342973561131, 29.5423760601243],
      [60.2343747167927, 29.5423867889603],
      [60.2344374054848, 29.5423760601243],
      [60.2346801562975, 29.5422634073456],
      [60.2349082337222, 29.5421614834031],
      [60.2353016968714, 29.5420917459686],
      [60.2357525064234, 29.5420541950424],
      [60.2359512341086, 29.5420327373703],
      [60.2360445956951, 29.5420112796981],
      [60.2364753892636, 29.5417564698417],
      [60.2366674440026, 29.5416169949729],
      [60.2367968135239, 29.5414775201041],
      [60.2369115118942, 29.5413219519812],
      [60.2370568848312, 29.541104693051],
      [60.2372436014065, 29.5408096500594],
      [60.2374196474849, 29.5405199714858],
      [60.2374556567949, 29.5404609628875],
      [60.2375463467333, 29.5403375812728],
      [60.2376343690705, 29.5402571150023],
      [60.237770403139, 29.5401686021048],
      [60.2378690941583, 29.5401310511786],
      [60.2379727860818, 29.5400901474911],
      [60.2379831219165, 29.5400874652821],

    ],
    [],

    {
      // Задаем опции геообъекта.
      // Цвет с прозрачностью.
      strokeColor: "#F28123",
      // Ширину линии.
      strokeWidth: 2,
      // Максимально допустимое количество вершин в ломаной.
      editorMaxPoints: 6,
      // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
      editorMenuManager: function (items) {
        items.push({
          title: "Удалить линию",
          onClick: function () {
            myMap.geoObjects.remove(myPolyline);
          },
        });
        return items;
      },
    }
  );
  var startPoint = new ymaps.Placemark(
    [59.70248632223368, 30.119334067809042],
    {
      hintContent: "Начало экотропы",
      //   balloonContent: `Начало маршрута Дудергофские Высоты`,
    },
    {
      iconLayout: "default#image",
      iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
      iconImageSize: [32, 51],
      iconImageOffset: [-10, -45],
    }
  );

  var endPoint = new ymaps.Placemark(
    [60.2379831219165, 29.5400874652821],
    {
      hintContent: "Конец экотропы",
      //   balloonContent: "Это конец маршрута",
    },
    {
      iconLayout: "default#image",
      iconImageHref: "2",
      iconImageSize: [15, 15],
      iconImageOffset: [0, 0],
    }
  );
  // Добавляем линию на карту.
  myMap.geoObjects.add(myPolyline).add(startPoint).add(endPoint);
});
//Геолокация пользователя//
function init() {
  var geolocation = ymaps.geolocation,
    myMap = new ymaps.Map(
      "map",
      {
        center: [55, 34],
        zoom: 10,
      },
      {
        searchControlProvider: "yandex#search",
      }
    );

  // Сравним положение, вычисленное по ip пользователя и
  // положение, вычисленное средствами браузера.
  geolocation
    .get({
      provider: "yandex",
      mapStateAutoApply: true,
    })
    .then(function (result) {
      // Красным цветом пометим положение, вычисленное через ip.
      result.geoObjects.options.set("preset", "islands#redCircleIcon");
      result.geoObjects.get(0).properties.set({
        balloonContentBody: "Мое местоположение",
      });
      myMap.geoObjects.add(result.geoObjects);
    });

  geolocation
    .get({
      provider: "browser",
      mapStateAutoApply: true,
    })
    .then(function (result) {
      // Синим цветом пометим положение, полученное через браузер.
      // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
      result.geoObjects.options.set("preset", "islands#blueCircleIcon");
      myMap.geoObjects.add(result.geoObjects);
    });
}
