ymaps.ready(function () {
  var myMap = new ymaps.Map("map", {
      zoom: 13,
      center: [60.624177, 30.100519],
      controls: [],
  });
  myMap.controls.add("geolocationControl", {
      float: "none",
      position: {
          top: "16px",
          left: "16px",
      },
  });
  myMap.controls.add("zoomControl", {
      float: "none",
      position: {
          top: "250px",
          right: "15px",
      },
  });
  myMap.controls.add("typeSelector", {
      float: "none",
      position: {
          top: "16px",
          left: "64px",
      },
  });

  // Трэк

  // 1 часть
  var myPolyline1 = new ymaps.Polyline(
      [
          // Указываем координаты вершин.
          [60.63089653, 30.1210894],
[60.63086754, 30.12121815],
[60.63044855, 30.12158293],
[60.6302351, 30.12162048],
[60.62993996, 30.12164194],
[60.62953149, 30.12176532],
[60.6291889, 30.12171168],
[60.6285617, 30.12193698],
[60.62844311, 30.12216765],
[60.62802672, 30.12316543],
[60.62777108, 30.12393791],
[60.62748119, 30.12443144],
[60.62712013, 30.12482304],
[60.62679597, 30.12510735],
[60.6265087, 30.12621242],
[60.62553617, 30.1291253],
[60.62532796, 30.12933988],
[60.62442657, 30.1294418],
[60.62356732, 30.12992996],
[60.62165371, 30.1299997],
[60.62124514, 30.1296832],
[60.62115815, 30.12964029],
[60.62102635, 30.12939889],
[60.62010902, 30.1298334],
[60.61970043, 30.12998897],
[60.61951064, 30.13003189],
[60.61943155, 30.1299997],
[60.61933929, 30.1298495],
[60.61914158, 30.12961883],
[60.61867762, 30.12935061],
[60.61845882, 30.12947399],
[60.61787622, 30.12990314],
[60.61782086, 30.13001579],
[60.61744915, 30.13035375],
[60.6169008, 30.13042349],
[60.61650008, 30.13060052],
[60.61597808, 30.13083655],
[60.61605981, 30.1293667],
[60.61628654, 30.1274677],
[60.61627072, 30.12668449],
[60.61634981, 30.12580473],
[60.61650272, 30.12497861],
[60.6165449, 30.12403447],
[60.61632344, 30.12309033],
[60.6157909, 30.12149173],
[60.61500524, 30.11933524],
[60.61469941, 30.11884171],
[60.61418266, 30.11823017],
[60.61371862, 30.11747915],
[60.61317021, 30.11765081],
[60.61268507, 30.11754352],
[60.61247414, 30.11707145],
[60.61222629, 30.11582691],
[60.61204172, 30.11431414],
[60.61200481, 30.11365968],
[60.61201536, 30.11319834],
[60.61235813, 30.1123615],
[60.6132704, 30.10862786],
[60.61362898, 30.10769445],
[60.61367644, 30.10710437],
[60.61362371, 30.1056667],
[60.61339696, 30.10443289],
[60.61332841, 30.10368187],
[60.6133706, 30.1031347],
[60.61335478, 30.10288793],
[60.61263761, 30.10066706],
[60.61262179, 30.10005552],
[60.61271671, 30.09898264],
[60.61365007, 30.0946911],
[60.61398228, 30.09358603],
[60.61600708, 30.08998114],
[60.61632344, 30.0892194],
[60.61670308, 30.08867223],
[60.61724615, 30.08839328],
[60.6173727, 30.08813578],
[60.61771541, 30.08694488],
[60.61818993, 30.08592564],
[60.6186539, 30.08389789],
[60.61892278, 30.08313615],
[60.61875407, 30.08288938],
[60.61760469, 30.08192379],
[60.61693507, 30.08116204],
[60.61627599, 30.07987458],
[60.61571181, 30.07940251],
[60.61473632, 30.07947761],
[60.61406138, 30.07912356],
[60.61390318, 30.07864076],
[60.61385045, 30.07832963],
[60.61377663, 30.07669884],
[60.61390318, 30.07563669],
[60.61401392, 30.07502515],
[60.61407719, 30.07241804],
[60.61421429, 30.06839473],
[60.61432503, 30.06913501],
[60.61458604, 30.07013816],
[60.61494988, 30.07098574],
[60.61526098, 30.07155437],
[60.61554307, 30.07158119],
[60.6157619, 30.07157046],
[60.61603081, 30.07142026],
[60.61639199, 30.07114131],
[60.61665562, 30.07087845],
[60.61688762, 30.07037956],
[60.6169298, 30.07033664],
[60.61728306, 30.07015425],
[60.61783667, 30.06977338],
[60.61807921, 30.06941396],
[60.61861172, 30.06903309],
[60.61919694, 30.06863612],
[60.61922857, 30.06859321],
[60.61954754, 30.06742913],
[60.61999831, 30.06628651],
[60.62016702, 30.06609339],
[60.6202171, 30.06610412],
[60.62036208, 30.06627578],
[60.62049388, 30.06673712],
[60.6207074, 30.06701607],
[60.62100263, 30.06709654],
[60.6212056, 30.06708044],
[60.62156145, 30.06680686],
[60.62185404, 30.06656009],
[60.62210444, 30.06658692],
[60.62222833, 30.06685514],
[60.62230741, 30.06725747],
[60.62239439, 30.06796557],
[60.62249455, 30.06828207],
[60.62262371, 30.06827134],
[60.62270542, 30.06818015],
[60.62275023, 30.0680514],
[60.62274496, 30.06771344],
[60.62278713, 30.06625969],
[60.62275286, 30.06591636],
[60.62278186, 30.06543893],
[60.62284512, 30.06524045],
[60.6230349, 30.06510634],
[60.62457746, 30.06499503],
[60.62460843, 30.06438214],
[60.624872, 30.06286937],
[60.62520409, 30.06209153],
[60.62526207, 30.06207544],
[60.62718074, 30.06639916],
[60.62752862, 30.06716091],
[60.62719129, 30.06833035],
[60.62709114, 30.06882388],
[60.62703316, 30.06940324],
[60.62706478, 30.07015425],
[60.62710695, 30.07061559],
[60.62715175, 30.07075507],
[60.62724663, 30.07086236],
[60.62794765, 30.07062632],
[60.62802672, 30.07072825],
[60.6280847, 30.07083554],
[60.6281822, 30.07091064],
[60.62830607, 30.07095355],
[60.62873826, 30.07092673],
[60.62897808, 30.0709911],
[60.62971859, 30.07300812],
[60.62989252, 30.07372159],
[60.63006645, 30.07405419],
[60.63037213, 30.07497687],
[60.63082275, 30.07589955],
[60.63098086, 30.07663984],
[60.63119694, 30.07755179],
[60.63133923, 30.07789511],
[60.63151315, 30.07814187],
[60.6317424, 30.07858712],
[60.6317872, 30.08113522],
[60.63178457, 30.08149463],
[60.6316818, 30.08215446],
[60.63154214, 30.08286256],
[60.63149734, 30.08342582],
[60.63149471, 30.08372623],
[60.63151579, 30.08398909],
[60.63156849, 30.08424122],
[60.63145788, 30.08521888],
[60.63128521, 30.0868966],
[60.6314148, 30.0901727],
[60.63139503, 30.09098809],
[60.63136209, 30.09155672],
[60.63135682, 30.09271275],
[60.63138845, 30.09363811],
[60.63146091, 30.09387147],
[60.6313924, 30.09584021],
[60.63136078, 30.09761583],
[60.63140821, 30.0986458],
[60.63161375, 30.09986889],
[60.63174023, 30.10115635],
[60.63161375, 30.10287296],
[60.63172969, 30.10386001],
[60.63166908, 30.10435354],
[60.63163746, 30.1049329],
[60.6315953, 30.10586094],
[60.63159267, 30.10635983],
[60.63160057, 30.10721546],
[60.6315874, 30.10762583],
[60.6315617, 30.10796245],
[60.63152284, 30.10827761],
[60.63138318, 30.10907423],
[60.63128436, 30.10973137],
[60.6312501, 30.11003178],
[60.63122375, 30.11040728],
[60.63112625, 30.11220436],
[60.6310999, 30.11451106],
[60.63099976, 30.11634033],
[60.63097078, 30.11669438],
[60.63074679, 30.11833053],
[60.63076523, 30.11933904],
[60.63076523, 30.11977356],
[60.63089238, 30.1209953],

      ],
      [],

      {
          // Задаем опции геообъекта.
          // Цвет с прозрачностью.
          strokeColor: "#F28123",
          // Ширину линии.
          strokeWidth: 3,
          // Максимально допустимое количество вершин в ломаной.
          editorMaxPoints: 6,
          // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
          editorMenuManager: function (items) {
              items.push({
                  title: "Удалить линию",
                  onClick: function () {
                      myMap.geoObjects.remove(myPolyline1);
                  },
              });
              return items;
          },
      }
  );

  // 2 часть
  var myPolyline2 = new ymaps.Polyline(
      [
          // Указываем координаты вершин.
          [60.6245801, 30.06498296],
[60.6245801, 30.06503258],
[60.62462556, 30.06568167],
[60.62463742, 30.06671834],
[60.62456362, 30.06730038],
[60.62443777, 30.06793204],
[60.62441932, 30.06835583],
[60.62443579, 30.068844],
[60.62450762, 30.06960306],
[60.62469607, 30.07025081],
[60.62496886, 30.07070008],
[60.62523901, 30.07092271],
[60.62526009, 30.07092807],
[60.62570749, 30.07079262],

      ],
      [],

      {
          // Задаем опции геообъекта.
          // Цвет с прозрачностью.
          strokeColor: "#F28123",
          // Ширину линии.
          strokeWidth: 3,
          // Максимально допустимое количество вершин в ломаной.
          editorMaxPoints: 6,
          // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
          editorMenuManager: function (items) {
              items.push({
                  title: "Удалить линию",
                  onClick: function () {
                      myMap.geoObjects.remove(myPolyline2);
                  },
              });
              return items;
          },
      }
  );

  // Обозначение начала маршрута
  var startPoint = new ymaps.Placemark(
      [60.63089653, 30.1210894],
      {
          hintContent: "Начало экотропы",
          //   balloonContent: `Начало экотропы`,
      },
      {
          iconLayout: "default#image",
          iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
          iconImageSize: [32, 51],
          iconImageOffset: [-10, -45],
      }
  );

  // Обозначение конца маршрута
  var endPoint = new ymaps.Placemark(
      [60.63089238, 30.1209953],
      {
          hintContent: "Конец экотропы",
          ////balloonContent: "Это конец экотропы",
      },
      {
          iconLayout: "default#image",
          iconImageHref: "2",
          iconImageSize: [15, 15],
          iconImageOffset: [0, 0],
      }
  );

  // Добавляем линии на карту.
  myMap.geoObjects.add(myPolyline1).add(myPolyline2).add(startPoint).add(endPoint);

});

//Геолокация пользователя//
function init() {
  var geolocation = ymaps.geolocation,
      myMap = new ymaps.Map(
          "map",
          {
              center: [55, 34],
              zoom: 10,
          },
          {
              searchControlProvider: "yandex#search",
          }
      );

  // Сравним положение, вычисленное по ip пользователя и
  // положение, вычисленное средствами браузера.
  geolocation
      .get({
          provider: "yandex",
          mapStateAutoApply: true,
      })
      .then(function (result) {
          // Красным цветом пометим положение, вычисленное через ip.
          result.geoObjects.options.set("preset", "islands#redCircleIcon");
          result.geoObjects.get(0).properties.set({
              balloonContentBody: "Мое местоположение",
          });
          myMap.geoObjects.add(result.geoObjects);
      });

  geolocation
      .get({
          provider: "browser",
          mapStateAutoApply: true,
      })
      .then(function (result) {
          // Синим цветом пометим положение, полученное через браузер.
          // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
          result.geoObjects.options.set("preset", "islands#blueCircleIcon");
          myMap.geoObjects.add(result.geoObjects);
      });
}
