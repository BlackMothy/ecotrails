ymaps.ready(function () {
    var myMap = new ymaps.Map("map", {
        zoom: 16,
        center: [60.808694, 28.937171],
        controls: [],
    });
    myMap.controls.add("geolocationControl", {
        float: "none",
        position: {
            top: "16px",
            left: "16px",
        },
    });
    myMap.controls.add("zoomControl", {
        float: "none",
        position: {
            top: "250px",
            right: "15px",
        },
    });
    myMap.controls.add("typeSelector", {
        float: "none",
        position: {
            top: "16px",
            left: "64px",
        },
    });

    // Трэк
    
    // 1 часть
    var myPolyline1 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [60.8114229744453, 28.9343354743037],
            [60.8113391233608, 28.934394482902],
            [60.8113102994996, 28.9345125000987],
            [60.8112998180891, 28.934582237533],
            [60.811261822938, 28.9346761148485],
            [60.8112172768518, 28.9347297590288],
            [60.8111740408851, 28.934767309955],
            [60.8111425965089, 28.9348638694796],
            [60.8111098419174, 28.9349094670328],
            [60.8110718465491, 28.9349228780779],
            [60.8109997862436, 28.93494433575],
            [60.810982753784, 28.9349041026148],
            [60.8109709620758, 28.9348048608812],
            [60.8109539296008, 28.9346305172953],
            [60.8109290359671, 28.9345956485781],
            [60.8108478039657, 28.9345473688158],
            [60.8108202898569, 28.9345125000986],
            [60.8107993267104, 28.9344534915003],
            [60.8107953961189, 28.9343944829019],
            [60.810816359268, 28.9343032877954],
            [60.8108360122077, 28.9342576902422],
            [60.8108373223942, 28.9341611307176],
            [60.8108058776861, 28.9340028803858],
            [60.810774432947, 28.9339224141153],
            [60.8107207147794, 28.9338741343531],
            [60.8106525842905, 28.9338821809801],
            [60.8105116799065, 28.9339747912198],
            [60.8104160345047, 28.9340284354001],
            [60.8103059764376, 28.9341330415517],
            [60.8102666698931, 28.9341974145681],
            [60.8102260530796, 28.9342027789861],
            [60.8101867464366, 28.934181321314],
            [60.8101382681769, 28.9341330415517],
            [60.8101042023287, 28.9340820795804],
            [60.8100766875786, 28.9339882022649],
            [60.8100727568981, 28.9338621384412],
            [60.8100504830327, 28.9337360746175],
            [60.8100151068525, 28.9336636549741],
            [60.8099679385632, 28.9336207396299],
            [60.8099076678699, 28.9335965997487],
            [60.8098290537511, 28.9336100107938],
            [60.809764852077, 28.9336287862569],
            [60.8097307858301, 28.93364756172],
            [60.8096678942018, 28.9337012059003],
            [60.8095801077635, 28.9337736255437],
            [60.8093861905867, 28.9338406807691],
            [60.8093547444485, 28.9339265114575],
            [60.8092289595856, 28.9341464525968],
            [60.8092171672202, 28.9342993385106],
            [60.8092001338089, 28.9344388133793],
            [60.8091817901251, 28.9345434195309],
            [60.8091529643149, 28.9345890170842],
            [60.8090979331413, 28.9346131569653],
            [60.8090337299961, 28.9346372968464],
            [60.8089983526976, 28.9346694833546],
            [60.8089590445421, 28.9347231275349],
            [60.8089092541424, 28.9347579962521],
            [60.808875186973, 28.9347579962521],
            [60.8088502917174, 28.934747267416],
            [60.8087913291925, 28.9347794539242],
            [60.8087297459945, 28.9348438269406],
            [60.808685196364, 28.9349323398381],
            [60.808661611245, 28.9350235349446],
            [60.8086170615284, 28.9351120478421],
            [60.8085227207376, 28.9353427178174],
            [60.8084794811194, 28.9354178196698],
            [60.8084296899713, 28.9354365951329],
            [60.8083956222989, 28.9355465657025],
            [60.8083667957784, 28.9356109387188],
            [60.8083340383282, 28.9356189853459],
            [60.8082894881542, 28.9356592184811],
            [60.8082423173139, 28.9357691890507],
            [60.8081872845788, 28.9359274393826],
            [60.8081243898991, 28.9361044651776],
            [60.8080732878879, 28.9362171179562],
            [60.808027427039, 28.9362707621365],
            [60.8080182548613, 28.936353910616],
            [60.8080523229366, 28.9363995081692],
            [60.8080719775789, 28.9364343768864],
            [60.8080903219007, 28.9365845805913],
            [60.808091632209, 28.9367052799969],
            [60.8080955631336, 28.9367321020871],
            [60.8080575641214, 28.9367830640582],
            [60.8080130135614, 28.9368393904475],
            [60.8079697732525, 28.9368930346279],
            [60.8078125352716, 28.9369922763614],
            [60.8077706050125, 28.9370700604228],
            [60.8077352263135, 28.9371156579761],
            [60.8077037785392, 28.9371612555293],
            [60.8076448138956, 28.9372470862178],
            [60.8075910904588, 28.9373275524882],
            [60.807528194613, 28.9373811966685],
            [60.8074652986342, 28.9374402052669],
            [60.8073879888349, 28.9375233537463],
            [60.8073250925887, 28.9375769979266],
            [60.8072818513476, 28.9375904089717],
            [60.8072333686742, 28.9376681930331],
            [60.8071796445448, 28.9377111083773],
            [60.8071442651906, 28.9377325660495],
            [60.8071246099678, 28.9377701169756],
            [60.8071010236954, 28.9378479010371],
            [60.807055161449, 28.9378854519633],
            [60.8070014370195, 28.9379578716067],
            [60.8069752299479, 28.9380463845042],
            [60.8069752299479, 28.9381053931025],
            [60.8070027473725, 28.9382207280901],
            [60.8069883334864, 28.9383065587786],
            [60.8069975059601, 28.9383494741229],
            [60.8070394372351, 28.9383441097048],
            [60.8070407475866, 28.9384218937662],
            [60.8070171612521, 28.9384540802744],
            [60.8069804713639, 28.9384701735285],
            [60.8069424710419, 28.9385372287539],
            [60.8069241260601, 28.9386042839792],
            [60.8069018499967, 28.9386659747866],
            [60.8068952982103, 28.9387678987291],
            [60.806897918925, 28.9388617760447],
            [60.8068572978231, 28.9392238742617],
            [60.8068690910515, 28.9393231159952],
            [60.806897918925, 28.939465273073],
            [60.8069450917527, 28.9395832902697],
            [60.8069699884858, 28.9397066718844],
            [60.8069817816726, 28.939830053499],
            [60.8069529538749, 28.9400178081301],
            [60.8069241260511, 28.9401465541628],
            [60.8068808842666, 28.9402887112406],
            [60.8068533667369, 28.9404764658716],
            [60.8067970212358, 28.9406749493387],
            [60.8067380549167, 28.9407741910723],
            [60.8066961232457, 28.9408707505968],
            [60.8066856403193, 28.9409324414042],
            [60.8066790884886, 28.9410209543016],
            [60.8066607433554, 28.9411148316172],
            [60.8066620537134, 28.9412140733507],
            [60.8066686055476, 28.9413159972933],
            [60.8066987439586, 28.9414179212358],
            [60.8067406756262, 28.9415815359857],
            [60.806764262165, 28.9416915065553],
            [60.8067878486863, 28.9418658501413],
            [60.8067747450655, 28.9419543630388],
            [60.8067550896242, 28.941997278383],
            [60.8066869506672, 28.9421260244157],
            [60.806652881107, 28.9422145373131],
            [60.8066410877986, 28.942362058809],
            [60.8066502603722, 28.9424908048417],
            [60.806677778077, 28.9426061398293],
            [60.8067052957582, 28.9427026993539],
            [60.80668695064, 28.9428046232964],
            [60.806658122576, 28.9428636318947],
            [60.8066410877986, 28.9429414159562],
            [60.8066489500047, 28.9430433398988],
            [60.8066672951447, 28.9431211239602],
            [60.8067131579484, 28.9431908613946],
            [60.8067446066901, 28.9432579166199],
            [60.8067550895971, 28.9433303362633],
            [60.80674067559, 28.943440306833],
            [60.8067328134066, 28.9435100442673],
            [60.8067328134066, 28.9436575657632],
            [60.806762951757, 28.9438587314393],
        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline1);
                    },
                });
                return items;
            },
        }
    );

    // 2 часть
    var myPolyline2 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [60.8080968733604, 28.936732102087],
            [60.8081093212845, 28.9368051922826],
            [60.8081204588968, 28.9368360376863],
            [60.8081551820158, 28.936877611926],
            [60.8081790950852, 28.9368910229711],
            [60.8081974393455, 28.9369272327928],
            [60.8082069390476, 28.9370452499894],
            [60.8082210247985, 28.9370834714679],
            [60.808246575696, 28.9371163285283],
            [60.8082996428703, 28.9372464156655],
            [60.8083510720843, 28.9372792727259],
            [60.8084408273361, 28.9373195058611],
            [60.8084748949603, 28.9373731500414],
            [60.8084938941874, 28.9374375230577],
            [60.8085063419566, 28.9375287181643],
            [60.8085083073934, 28.9376990384367],
            [60.8085128934122, 28.9377325660494],
            [60.808525341174, 28.937755364826],
            [60.8085875799104, 28.9377862102297],
            [60.808631474498, 28.9378385133054],
            [60.8086648867763, 28.9379136151578],
            [60.8086779896209, 28.9379712826516],
            [60.8086858513252, 28.938136238506],
            [60.8086982990195, 28.9381925648953],
            [60.8087238495258, 28.9382596201207],
            [60.8087356420645, 28.9383347219731],
            [60.8087271252315, 28.9384513980653],
            [60.808714022407, 28.9385412520673],
            [60.8087192635374, 28.9386860913541]
        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );
    
    // Обозначение начала маршрута
    var startPoint = new ymaps.Placemark(
        [60.8114229744453, 28.9343354743037],
        {
            hintContent: "Начало экотропы",
            //   balloonContent: `Начало маршрута`,
        },
        {
            iconLayout: "default#image",
            iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
            iconImageSize: [32, 51],
            iconImageOffset: [-10, -45],
        }
    );

    // Добавляем линии на карту.
    myMap.geoObjects.add(myPolyline1).add(myPolyline2).add(startPoint);

});

//Геолокация пользователя//
function init() {
    var geolocation = ymaps.geolocation,
        myMap = new ymaps.Map(
            "map",
            {
                center: [55, 34],
                zoom: 10,
            },
            {
                searchControlProvider: "yandex#search",
            }
        );

    // Сравним положение, вычисленное по ip пользователя и
    // положение, вычисленное средствами браузера.
    geolocation
        .get({
            provider: "yandex",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Красным цветом пометим положение, вычисленное через ip.
            result.geoObjects.options.set("preset", "islands#redCircleIcon");
            result.geoObjects.get(0).properties.set({
                balloonContentBody: "Мое местоположение",
            });
            myMap.geoObjects.add(result.geoObjects);
        });

    geolocation
        .get({
            provider: "browser",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Синим цветом пометим положение, полученное через браузер.
            // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
            result.geoObjects.options.set("preset", "islands#blueCircleIcon");
            myMap.geoObjects.add(result.geoObjects);
        });
}
