ymaps.ready(function () {
  var myMap = new ymaps.Map("map", {
    zoom: 15,
    center: [55.781572, 37.423424],
    controls: [],
  });
  myMap.controls.add("geolocationControl", {
    float: "none",
    position: {
      top: "16px",
      left: "16px",
    },
  });
  myMap.controls.add("zoomControl", {
    float: "none",
    position: {
      top: "250px",
      right: "15px",
    },
  });
  myMap.controls.add("typeSelector", {
    float: "none",
    position: {
      top: "16px",
      left: "64px",
    },
  });


  var myPolyline = new ymaps.Polyline(
    [
      // Указываем координаты вершин.
      [55.78069329,37.43567138],
      [55.78069684,37.43548475],
      [55.78070387,37.43531532],
      [55.78071058,37.43527491],
      [55.7807581,37.435146],
      [55.78076386,37.43512538],
      [55.78076434,37.43510074],
      [55.78073939,37.43491164],
      [55.78067818,37.43456698],
      [55.78066004,37.43422366],
      [55.78072655,37.43310786],
      [55.78092003,37.43171311],
      [55.78106514,37.43116594],
      [55.78116188,37.43079043],
      [55.7812042,37.43023789],
      [55.78126769,37.42968536],
      [55.78143698,37.42892361],
      [55.78143094,37.4285481],
      [55.78141885,37.4283979],
      [55.78143698,37.42774344],
      [55.78138257,37.42757714],
      [55.78131908,37.42748058],
      [55.78123444,37.4274323],
      [55.78111049,37.42740548],
      [55.78103793,37.42734647],
      [55.78095933,37.42724455],
      [55.78083564,37.42695009],
      [55.78061344,37.42726928],
      [55.78042449,37.42755627],
      [55.78031263,37.42779231],
      [55.78020077,37.42808735],
      [55.78018565,37.4282161],
      [55.78013426,37.42800688],
      [55.78008891,37.42764747],
      [55.78006321,37.42751872],
      [55.7800224,37.42736047],
      [55.77993875,37.42718285],
      [55.7798279,37.4270477],
      [55.77947217,37.42668992],
      [55.77913054,37.42634391],
      [55.7793724,37.42566263],
      [55.77938752,37.4255017],
      [55.7793724,37.42540514],
      [55.77913961,37.42549634],
      [55.77889774,37.4255929],
      [55.77875262,37.42596304],
      [55.77844424,37.4256519],
      [55.7783868,37.42555535],
      [55.77835354,37.42543733],
      [55.77838378,37.42525494],
      [55.77838075,37.42456293],
      [55.77848355,37.42446637],
      [55.77854099,37.42432689],
      [55.7785682,37.42425716],
      [55.77885844,37.42379582],
      [55.77916984,37.42374217],
      [55.77935728,37.42368316],
      [55.77951147,37.4235866],
      [55.77975333,37.42329693],
      [55.77987124,37.4230287],
      [55.77994914,37.42281677],
      [55.78012751,37.42247345],
      [55.78029681,37.42197456],
      [55.78039355,37.42155077],
      [55.78048727,37.42130937],
      [55.78087424,37.42130401],
      [55.78076843,37.42097141],
      [55.78054471,37.42024722],
      [55.78041774,37.41984489],
      [55.78021519,37.41910996],
      [55.78008821,37.41839113],
      [55.77999147,37.41802098],
      [55.77954705,37.416873],
      [55.77951682,37.41673352],
      [55.77947449,37.41641166],
      [55.77929612,37.41577329],
      [55.77927193,37.41555335],
      [55.77921751,37.41393866],
      [55.77924472,37.4136007],
      [55.779281,37.41334321],
      [55.77931728,37.41314473],
      [55.77964077,37.41246345],
      [55.77968914,37.41229178],
      [55.77970124,37.41214695],
      [55.77970124,37.41197528],
      [55.779671,37.41163733],
      [55.77965891,37.41102846],
      [55.77965286,37.41064491],
      [55.77975868,37.41033377],
      [55.77972844,37.40993681],
      [55.77971635,37.40967395],
      [55.77974507,37.40945937],
      [55.77970048,37.40933197],
      [55.77963624,37.40916433],
      [55.77937926,37.40848037],
      [55.77923639,37.40814179],
      [55.77928251,37.40803512],
      [55.77933389,37.40794372],
      [55.77961126,37.40768217],
      [55.7797874,37.40752282],
      [55.78000054,37.40741016],
      [55.78037617,37.4072157],
      [55.78060518,37.40710976],
      [55.78066791,37.40704672],
      [55.78067169,37.40697028],
      [55.78067471,37.4068697],
      [55.78068983,37.40673961],
      [55.7806989,37.40666317],
      [55.7807125,37.40659477],
      [55.78073517,37.40649151],
      [55.78079488,37.40627559],
      [55.78094286,37.40597145],
      [55.78099795,37.40596393],
      [55.78110258,37.40593358],
      [55.78125315,37.40586261],
      [55.78132919,37.40584164],
      [55.78144393,37.40582527],
      [55.78159501,37.40581555],
      [55.78178996,37.40588574],
      [55.78184776,37.40590564],
      [55.78198927,37.40589447],
      [55.78234347,37.40605833],
      [55.78264879,37.40599396],
      [55.78285134,37.40599396],
      [55.78298737,37.40610661],
      [55.78324735,37.40620853],
      [55.78335618,37.40620853],
      [55.78369475,37.40658404],
      [55.78415423,37.40695955],
      [55.78450186,37.40730288],
      [55.78493716,37.40758183],
      [55.78520619,37.40789833],
      [55.78561427,37.4084455],
      [55.7858047,37.40870299],
      [55.78614023,37.40895512],
      [55.78631252,37.40919115],
      [55.78666316,37.40989389],
      [55.78698357,37.41060199],
      [55.78723143,37.41091849]    

    ],
    [],

    {
      // Задаем опции геообъекта.
      // Цвет с прозрачностью.
         strokeColor: "#F28123",
      // Ширину линии.
      strokeWidth: 3,
      // Максимально допустимое количество вершин в ломаной.
      editorMaxPoints: 6,
      // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
      editorMenuManager: function (items) {
        items.push({
          title: "Удалить линию",
          onClick: function () {
            myMap.geoObjects.remove(myPolyline);
          },
        });
        return items;
      },
    }
  );
  var startPoint = new ymaps.Placemark(
    [55.78069329,37.43567138],
    {
      hintContent: "Начало экотропы",    
    },
    {
      iconLayout: "default#image",
      iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
      iconImageSize: [32, 51],
      iconImageOffset: [-10, -45],
    }
  );

  var endPoint = new ymaps.Placemark(
    [55.78723143,37.41091849],
    {
      hintContent: "Конец экотропы",
    //   balloonContent: "Это конец маршрута",
    },
    {
      iconLayout: "default#image",
      iconImageHref: "2",
      iconImageSize: [15, 15],
      iconImageOffset: [0, 0],
    }
  );
  // Добавляем линию на карту.
  myMap.geoObjects.add(myPolyline).add(startPoint).add(endPoint);
});
//Геолокация пользователя//
function init() {
  var geolocation = ymaps.geolocation,
    myMap = new ymaps.Map(
      "map",
      {
        center: [55, 34],
        zoom: 10,
      },
      {
        searchControlProvider: "yandex#search",
      }
    );

  // Сравним положение, вычисленное по ip пользователя и
  // положение, вычисленное средствами браузера.
  geolocation
    .get({
      provider: "yandex",
      mapStateAutoApply: true,
    })
    .then(function (result) {
      // Красным цветом пометим положение, вычисленное через ip.
      result.geoObjects.options.set("preset", "islands#redCircleIcon");
      result.geoObjects.get(0).properties.set({
        balloonContentBody: "Мое местоположение",
      });
      myMap.geoObjects.add(result.geoObjects);
    });

  geolocation
    .get({
      provider: "browser",
      mapStateAutoApply: true,
    })
    .then(function (result) {
      // Синим цветом пометим положение, полученное через браузер.
      // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
      result.geoObjects.options.set("preset", "islands#blueCircleIcon");
      myMap.geoObjects.add(result.geoObjects);
    });
}
