ymaps.ready(function () {
    var myMap = new ymaps.Map("map", {
        zoom: 15,
        center: [56.281510, 43.977375],
        controls: [],
    });
    myMap.controls.add("geolocationControl", {
        float: "none",
        position: {
            top: "16px",
            left: "16px",
        },
    });
    myMap.controls.add("zoomControl", {
        float: "none",
        position: {
            top: "250px",
            right: "15px",
        },
    });
    myMap.controls.add("typeSelector", {
        float: "none",
        position: {
            top: "16px",
            left: "64px",
        },
    });

    // Трэк

    // 1 часть
    var myPolyline1 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.28243035, 43.97982802],
            [56.28248369, 43.97894893],
            [56.28249849, 43.97870348],
            [56.28251428, 43.97833403],
            [56.28296746, 43.97839036],
            [56.28343892, 43.97844936],
            [56.28396259, 43.97852313],
            [56.28432214, 43.97856872],
            [56.28478314, 43.97862572],
            [56.28480925, 43.97757966],
            [56.28482118, 43.97709217],
            [56.28482596, 43.97702694],
            [56.28483372, 43.97696038],
            [56.2848399, 43.97689097],
            [56.28484608, 43.97661705],
            [56.28499866, 43.97665411],
            [56.28507829, 43.97666019],
            [56.28515975, 43.97664522],
            [56.28518846, 43.9766365],
            [56.28521159, 43.97661839],
            [56.28524031, 43.97658654],
            [56.28527294, 43.97654111],
            [56.28530259, 43.97648697],
            [56.28532199, 43.97643835],
            [56.28536525, 43.97629854],
            [56.28536935, 43.97626837],
            [56.28537327, 43.97622511],
            [56.28537299, 43.97617331],
            [56.28537234, 43.97614096],
            [56.2853673, 43.97611581],
            [56.28535509, 43.97609721],
            [56.28530459, 43.97604544],
            [56.28521569, 43.97595723],
            [56.28513811, 43.97588615],
            [56.28509657, 43.97586286],
            [56.28495246, 43.9758125],
            [56.28489708, 43.97579243],
            [56.2848595, 43.97578624],
            [56.28481997, 43.97578691],
            [56.28479316, 43.97579],
            [56.28476857, 43.97579975],
            [56.28472452, 43.97582518],
            [56.28469094, 43.97585131],
            [56.28466668, 43.97588146],
            [56.2846001, 43.97599646],
            [56.28454994, 43.97611146],
            [56.28447832, 43.97623517],
            [56.28442984, 43.9763428],
            [56.28441753, 43.97638839],
            [56.28441026, 43.9764293],
            [56.28440559, 43.9764702],
            [56.28440489, 43.97649991],
            [56.28440827, 43.97653022],
            [56.28441369, 43.97655657],
            [56.28442848, 43.97658111],
            [56.2845298, 43.97671764],
            [56.28461749, 43.97684477],
            [56.28465511, 43.97689131],
            [56.2847478, 43.97697211],
            [56.28482333, 43.97705828],
            [56.28480291, 43.9770628],
            [56.28476831, 43.97706331],
            [56.28474724, 43.97708845],
            [56.28473512, 43.97711997],
            [56.28472262, 43.97717428],
            [56.28470901, 43.97728157],
            [56.28469689, 43.9773151],
            [56.28468085, 43.97733387],
            [56.28466206, 43.97734455],
            [56.28464745, 43.9773479],
            [56.28456709, 43.97731979],
            [56.28452234, 43.97732449],
            [56.28450369, 43.97733454],
            [56.28444364, 43.97738182],
            [56.28439403, 43.97741769],
            [56.28430452, 43.9774539],
            [56.28419076, 43.97747201],
            [56.28415327, 43.97746798],
            [56.28407178, 43.9774425],
            [56.28387074, 43.97732046],
            [56.28384482, 43.97730571],
            [56.28378011, 43.97727755],
            [56.28373796, 43.97727621],
            [56.2836932, 43.97729029],
            [56.28356905, 43.9773931],
            [56.28350335, 43.97745457],
            [56.28344279, 43.9775102],
            [56.28335416, 43.97757527],
            [56.28323033, 43.97761953],
            [56.28319676, 43.9776202],
            [56.28315647, 43.97760679],
            [56.28303339, 43.97751626],
            [56.28294051, 43.97747201],
            [56.28289314, 43.97748408],
            [56.28284801, 43.97750956],
            [56.28278931, 43.97755703],
            [56.28273418, 43.97758426],
            [56.28271411, 43.977586],
            [56.28268762, 43.97757728],
            [56.28266077, 43.9775565],
            [56.282641, 43.97752699],
            [56.28261638, 43.97745457],
            [56.28260668, 43.97740495],
            [56.28259139, 43.97736002],
            [56.28258225, 43.9773503],
            [56.28256304, 43.97734326],
            [56.2825526, 43.97721787],
            [56.28254458, 43.97716791],
            [56.28252901, 43.97710672],
            [56.28249628, 43.97700128],
            [56.28244517, 43.97684108],
            [56.28242093, 43.97674184],
            [56.28236386, 43.97641595],
            [56.28235789, 43.97636197],
            [56.28235509, 43.97632023],
            [56.28235827, 43.97627715],
            [56.28237223, 43.97622198],
            [56.28256714, 43.97561464],
            [56.28257684, 43.97557776],
            [56.28258654, 43.97552211],
            [56.28259064, 43.97547651],
            [56.28259139, 43.97542421],
            [56.28256863, 43.97483144],
            [56.28256826, 43.97475701],
            [56.28257162, 43.97469733],
            [56.282583, 43.9746115],
            [56.28259474, 43.97454176],
            [56.28264902, 43.97438418],
            [56.28265778, 43.97433724],
            [56.28266412, 43.97428226],
            [56.28266319, 43.97414781],
            [56.28265666, 43.97408646],
            [56.28264902, 43.97403717],
            [56.28263176, 43.97397095],
            [56.28261153, 43.97391681],
            [56.28238656, 43.97390143],
            [56.28232576, 43.97389607],
            [56.28190278, 43.97386925],
            [56.28138431, 43.9738384],
            [56.28135167, 43.97385315],
            [56.2812959, 43.97388936],
            [56.28124667, 43.97395038],
            [56.28122261, 43.97399531],
            [56.28120125, 43.97406136],
            [56.28119034, 43.97411131],
            [56.28116125, 43.97436344],
            [56.28113215, 43.97462697],
            [56.28110007, 43.97488379],
            [56.28108068, 43.97500583],
            [56.28102883, 43.97530758],
            [56.28100831, 43.97540548],
            [56.28094528, 43.97538402],
            [56.28094904, 43.97517047],
            [56.28097776, 43.97468767],
            [56.28097739, 43.97462128],
            [56.28097068, 43.97455155],
            [56.28094979, 43.97438994],
            [56.28091193, 43.97420956],
            [56.28088526, 43.97411904],
            [56.28079312, 43.97412239],
            [56.28075843, 43.9741177],
            [56.28073866, 43.97410496],
            [56.28072188, 43.97409155],
            [56.28070975, 43.97406607],
            [56.28070108, 43.97403857],
            [56.28069465, 43.97400572],
            [56.28068914, 43.97394654],
            [56.28068364, 43.97384579],
            [56.28067711, 43.97378779],
            [56.28066406, 43.97369659],
            [56.2806469, 43.97361344],
            [56.28063403, 43.97356919],
            [56.28062377, 43.97355041],
            [56.28060941, 43.97353432],
            [56.2805903, 43.97352761],
            [56.28057267, 43.97352493],
            [56.28050689, 43.9735389],
            [56.28039512, 43.97357321],
            [56.2803235, 43.97360942],
            [56.28025337, 43.97365636],
            [56.28018996, 43.97372207],
            [56.28013177, 43.97381595],
            [56.28004896, 43.9739675],
            [56.27991019, 43.97417403],
            [56.27985983, 43.97422298],
            [56.27980313, 43.97426254],
            [56.27972368, 43.97428534],
            [56.27970428, 43.97428869],
            [56.2796689, 43.97428959],
            [56.27959862, 43.97427141],
            [56.27932753, 43.97419079],
            [56.27921413, 43.97413916],
            [56.27913318, 43.97409825],
            [56.27909905, 43.97407914],
            [56.27906818, 43.97406221],
            [56.27904267, 43.9740457],
            [56.27902408, 43.97402375],
            [56.27900548, 43.97399643],
            [56.27897878, 43.97394013],
            [56.27894835, 43.97384427],
            [56.27889457, 43.97367468],
            [56.27883936, 43.97355196],
            [56.27874909, 43.97340176],
            [56.27866031, 43.97325156],
            [56.27863681, 43.97321568],
            [56.27860734, 43.97318249],
            [56.27852819, 43.97313691],
            [56.27845104, 43.97310471],
            [56.27843549, 43.97310166],
            [56.27840683, 43.97310422],
            [56.27819401, 43.97317109],
            [56.27816231, 43.97317981],
            [56.27812985, 43.97319657],
            [56.27809553, 43.97323613],
            [56.27798064, 43.97342322],
            [56.27794482, 43.97348759],
            [56.27790752, 43.97358415],
            [56.27786164, 43.973731],
            [56.27785529, 43.97376118],
            [56.27783552, 43.97385036],
            [56.27782769, 43.97391406],
            [56.27782545, 43.97397575],
            [56.27783702, 43.97404616],
            [56.27787078, 43.97414641],
            [56.27790752, 43.97424129],
            [56.27802689, 43.97451756],
            [56.27813657, 43.97476432],
            [56.27816716, 43.97486625],
            [56.27817797, 43.97491537],
            [56.27819447, 43.97500803],
            [56.27820426, 43.97505376],
            [56.27822632, 43.97514702],
            [56.27825062, 43.97523493],
            [56.27827118, 43.97528059],
            [56.27836636, 43.97542817],
            [56.27884345, 43.97612291],
            [56.27891024, 43.97618723],
            [56.27905572, 43.97626971],
            [56.27909172, 43.9762905],
            [56.27913667, 43.97632134],
            [56.27915998, 43.9763428],
            [56.27917733, 43.97639108],
            [56.2791915, 43.97634347],
            [56.27927581, 43.97535039],
            [56.27948508, 43.97548383],
            [56.27988458, 43.97574065],
            [56.28022776, 43.97596059],
            [56.28032922, 43.97576747],
            [56.28038294, 43.97569237],
            [56.28043964, 43.97563604],
            [56.28050413, 43.97559592],
            [56.28068359, 43.97551534],
            [56.28082906, 43.97545097],
            [56.28088445, 43.97542727],
            [56.28094432, 43.97539017],
            [56.28100773, 43.97541095],
            [56.28099842, 43.97550286],
            [56.28099543, 43.97557828],
            [56.2809999, 43.97580122],
            [56.28099878, 43.97630078],
            [56.28099803, 43.97703637],
            [56.28099729, 43.97728582],
            [56.2809958, 43.9780241],
            [56.28102153, 43.97803281],
            [56.28103645, 43.97804891],
            [56.28104914, 43.97807238],
            [56.28105734, 43.97810792],
            [56.28105995, 43.97813273],
            [56.28105884, 43.97816558],
            [56.28105622, 43.97818067],
            [56.28105212, 43.97819308],
            [56.28104168, 43.97822057],
            [56.28102564, 43.97824203],
            [56.28101184, 43.97825477],
            [56.28099542, 43.97825678],
            [56.28099542, 43.97898433],
            [56.28101295, 43.97898969],
            [56.28102788, 43.97899774],
            [56.28104373, 43.97901886],
            [56.2810565, 43.97904082],
            [56.28106368, 43.97906882],
            [56.2810663, 43.97909832],
            [56.28106741, 43.97912112],
            [56.28200478, 43.97924383],
            [56.28201297, 43.97983141],
            [56.28222894, 43.97983677],
            [56.28235911, 43.97986829],
            [56.28242662, 43.97990651],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline1);
                    },
                });
                return items;
            },
        }
    );

    // 2 часть
    var myPolyline2 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.27908114, 43.97407311],
            [56.27910656, 43.97442191],
            [56.27912926, 43.97458944],
            [56.27913607, 43.97469622],
            [56.27914512, 43.97480301],
            [56.27915491, 43.97490275],
            [56.27916843, 43.9749911],
            [56.27921582, 43.97520432],
            [56.2792231, 43.97524186],
            [56.2792356, 43.97528879],
            [56.27925721, 43.97533107],
            [56.27927661, 43.97535185],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // 3 часть
    var myPolyline3 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.            	
            [56.28486076, 43.97578864],
            [56.28485293, 43.97633447],
            [56.28519121, 43.9763177],
            [56.2852203, 43.9762312],
            [56.28529937, 43.97604747],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // 4 часть
    var myPolyline4 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.28536016, 43.97630965],
            [56.28485286, 43.97633424],
            [56.28484652, 43.97661722],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // Обозначение начала маршрута
    var startPoint = new ymaps.Placemark(
        [56.2824303484431, 43.9798280204902],
        {
            hintContent: "Начало экотропы",
            //   balloonContent: `Начало экотропы`,
        },
        {
            iconLayout: "default#image",
            iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
            iconImageSize: [32, 51],
            iconImageOffset: [-10, -45],
        }
    );

    // Обозначение конца маршрута
    var endPoint = new ymaps.Placemark(
        [56.282426616788, 43.9799011512614],
        {
            hintContent: "Конец экотропы",
            ////balloonContent: "Это конец экотропы",
        },
        {
            iconLayout: "default#image",
            iconImageHref: "2",
            iconImageSize: [15, 15],
            iconImageOffset: [0, 0],
        }
    );

    // Добавляем линии на карту.
    myMap.geoObjects.add(myPolyline1).add(myPolyline2).add(myPolyline3).add(myPolyline4).add(startPoint).add(endPoint);

});

//Геолокация пользователя//
function init() {
    var geolocation = ymaps.geolocation,
        myMap = new ymaps.Map(
            "map",
            {
                center: [55, 34],
                zoom: 10,
            },
            {
                searchControlProvider: "yandex#search",
            }
        );

    // Сравним положение, вычисленное по ip пользователя и
    // положение, вычисленное средствами браузера.
    geolocation
        .get({
            provider: "yandex",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Красным цветом пометим положение, вычисленное через ip.
            result.geoObjects.options.set("preset", "islands#redCircleIcon");
            result.geoObjects.get(0).properties.set({
                balloonContentBody: "Мое местоположение",
            });
            myMap.geoObjects.add(result.geoObjects);
        });

    geolocation
        .get({
            provider: "browser",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Синим цветом пометим положение, полученное через браузер.
            // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
            result.geoObjects.options.set("preset", "islands#blueCircleIcon");
            myMap.geoObjects.add(result.geoObjects);
        });
}
