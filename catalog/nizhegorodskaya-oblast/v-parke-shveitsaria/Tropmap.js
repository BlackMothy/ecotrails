ymaps.ready(function () {
    var myMap = new ymaps.Map("map", {
        zoom: 16,
        center: [56.281510, 43.977375],
        controls: [],
    });
    myMap.controls.add("geolocationControl", {
        float: "none",
        position: {
            top: "16px",
            left: "16px",
        },
    });
    myMap.controls.add("zoomControl", {
        float: "none",
        position: {
            top: "250px",
            right: "15px",
        },
    });
    myMap.controls.add("typeSelector", {
        float: "none",
        position: {
            top: "16px",
            left: "64px",
        },
    });

    // Трэк

    // 1 часть
    var myPolyline1 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.2824303484431, 43.9798280204902],
            [56.2824810773092, 43.9789536200168],
            [56.2825109168352, 43.9783206226459],
            [56.2829674556955, 43.9783903565886],
            [56.2834389201767, 43.9784439977226],
            [56.2839611013845, 43.9785137416027],
            [56.2843221404705, 43.9785566511899],
            [56.2847846253945, 43.9786263938774],
            [56.2848114933797, 43.9775803336736],
            [56.2848264035566, 43.9770921691061],
            [56.2848460788721, 43.9766713735638],
            [56.2851623600032, 43.9766847808378],
            [56.2851981634862, 43.9766633246077],
            [56.2853130379744, 43.9764943392436],
            [56.285365253226, 43.9762985406062],
            [56.2853697256693, 43.9762368501934],
            [56.2853518184423, 43.9761510170124],
            [56.2853130359673, 43.9760786012893],
            [56.2852130844952, 43.975971306768],
            [56.2851101374795, 43.9758559759825],
            [56.2848818806754, 43.9757674638386],
            [56.2847759621567, 43.9758077032537],
            [56.284665555438, 43.9759149789442],
            [56.2845462100644, 43.9761027415076],
            [56.2844656378488, 43.9763870508091],
            [56.2844835549446, 43.9764809286996],
            [56.2845342735157, 43.9767062432913],
            [56.2846551096807, 43.9768913144632],
            [56.284831162818, 43.977060291269],
            [56.2847461163912, 43.9771327115361],
            [56.2847237359634, 43.9772158591241],
            [56.2846968850234, 43.9773151032134],
            [56.284665555438, 43.9773338737322],
            [56.2845924611863, 43.9773177848896],
            [56.2845104026504, 43.9773311921637],
            [56.2843940257312, 43.9774143400735],
            [56.2843209320447, 43.9774518917577],
            [56.2842045624165, 43.977465299861],
            [56.2840926725638, 43.977454572624],
            [56.2838718609368, 43.9773177848896],
            [56.2837629536612, 43.9772695041033],
            [56.2836943229181, 43.9772882787061],
            [56.2835033457056, 43.977454572624],
            [56.2833541622062, 43.9775725860122],
            [56.2832258542447, 43.9776181916305],
            [56.2831706507922, 43.977612821588],
            [56.2830333888251, 43.9775162588205],
            [56.2829483476557, 43.9774733472614],
            [56.2828931425052, 43.9774840759782],
            [56.2828081025677, 43.9775403973284],
            [56.2827141082101, 43.9775860039467],
            [56.282667864196, 43.9775645421506],
            [56.2826350302095, 43.9775135830501],
            [56.2825992195478, 43.9773767925984],
            [56.2825634156653, 43.9773526507657],
            [56.2825559577894, 43.9772426829378],
            [56.2824977741025, 43.9770012782217],
            [56.2823892173205, 43.9767116686453],
            [56.2823549066947, 43.976515872812],
            [56.2823504311093, 43.9764166202061],
            [56.2823757986204, 43.9762878781921],
            [56.2825533375144, 43.9757407068488],
            [56.2825906412373, 43.9755475948793],
            [56.2826010893323, 43.9753732511556],
            [56.282607048661, 43.9752552305534],
            [56.2825876600063, 43.9749709124954],
            [56.2825757206687, 43.9748046179532],
            [56.2825816869782, 43.9746866033064],
            [56.2826160090597, 43.9744773894778],
            [56.2826577840143, 43.9743432849784],
            [56.2826652370463, 43.9742011217791],
            [56.2826532977082, 43.9740509246094],
            [56.2826115256747, 43.9739141188545],
            [56.2823929023023, 43.9739074738275],
            [56.282325755556, 43.973899417169],
            [56.2819035261764, 43.9738672296132],
            [56.2813932617866, 43.9738377298698],
            [56.2812947793452, 43.9738833269336],
            [56.2812246612554, 43.9739932978541],
            [56.2811903364722, 43.9741113135641],
            [56.2811560321728, 43.9743607640384],
            [56.281102308827, 43.9745592405945],
            [56.2810769468158, 43.974776499503],
            [56.2810575455433, 43.9749669414817],
            [56.2810471141101, 43.9751386039478],
            [56.2810187597302, 43.9752968533102],
            [56.2809918964943, 43.9754014628225],
            [56.2809680266981, 43.975428278483],
            [56.280947181007, 43.9753676123297],
            [56.280942698254, 43.9752710522961],
            [56.280947181007, 43.9750135563612],
            [56.280954642925, 43.9746165867853],
            [56.280947181007, 43.9744932068972],
            [56.2809382153687, 43.9743805550191],
            [56.2809113686187, 43.974222310652],
            [56.2808845135645, 43.9741230590413],
            [56.2807860334421, 43.974120376971],
            [56.2807323220297, 43.974096243734],
            [56.2807144217626, 43.9740586940191],
            [56.2806801049607, 43.973790469297],
            [56.2806457881587, 43.9736027070191],
            [56.2806129609921, 43.9735383438914],
            [56.2805607297648, 43.9735249331418],
            [56.2803951171645, 43.9735732110726],
            [56.2802533748828, 43.9736563599463],
            [56.2801295332671, 43.9738146064258],
            [56.2800489640235, 43.9739674971398],
            [56.2799101917618, 43.9741740326752],
            [56.279831112815, 43.9742464425536],
            [56.279763971554, 43.9742679022951],
            [56.2796550373201, 43.9742920432462],
            [56.2793267821582, 43.9741847540593],
            [56.2792133819581, 43.9741445181184],
            [56.2791328129373, 43.9741069691181],
            [56.2789985187952, 43.9740291882861],
            [56.278896812169, 43.9736699814962],
            [56.2788401077014, 43.9735492750801],
            [56.278749087038, 43.9734017621314],
            [56.278665530837, 43.9732381537986],
            [56.2786177831763, 43.9731818183743],
            [56.2784387331574, 43.9730959920288],
            [56.2781925222654, 43.9731684053074],
            [56.2781164173767, 43.9732032763601],
            [56.2779791362181, 43.9734178541907],
            [56.2779060256563, 43.9735787919396],
            [56.2778552892014, 43.9737611752038],
            [56.2778299284162, 43.9738979735154],
            [56.2778254549323, 43.9739757549957],
            [56.2778433581551, 43.9740696294492],
            [56.277907524419, 43.9742412884812],
            [56.278026892121, 43.9745175564232],
            [56.2781492471475, 43.9748179701078],
            [56.2782731040803, 43.9751478782597],
            [56.2783865006781, 43.9754348650456],
            [56.2786371774493, 43.9757245545772],
            [56.2789221772983, 43.9760705587833],
            [56.2789997698064, 43.9761563887593],
            [56.2790639338705, 43.9762502703272],
            [56.2791370369521, 43.9764031532213],
            [56.2791728500524, 43.9760517780435],
            [56.279269841813, 43.9753436795854],
            [56.2794846967845, 43.9754804704917],
            [56.2798845804934, 43.9757406472253],
            [56.2802277628858, 43.9759605905024],
            [56.2803292248528, 43.9757674714826],
            [56.2804396371911, 43.9756360388127],
            [56.2806783613357, 43.9755046100741],
            [56.2808305522282, 43.975442924821],
            [56.2809529004873, 43.9754330791924],
            [56.2809700565402, 43.9754424689475],
            [56.2809879600987, 43.9758447998424],
            [56.2809924409787, 43.9762994358457],
            [56.2810006461323, 43.9770370377986],
            [56.2810021400628, 43.9772864927327],
            [56.2809931915738, 43.9780160512432],
            [56.2809946791434, 43.9780220943335],
            [56.2810215333123, 43.978032805509],
            [56.2810364519633, 43.9780489112617],
            [56.2810491375076, 43.9780723790727],
            [56.2810573440621, 43.9781079167873],
            [56.2810599540554, 43.9781327324452],
            [56.2810588427086, 43.9781655761124],
            [56.2810521215202, 43.9781930761056],
            [56.2810416845354, 43.9782205702297],
            [56.2810256410708, 43.9782420299711],
            [56.281011844531, 43.9782547694293],
            [56.2810028751725, 43.9782554429375],
            [56.2810043849345, 43.9784049718725],
            [56.2810073626905, 43.9786202210851],
            [56.2810088512878, 43.9787550034967],
            [56.2810125842858, 43.9789394026147],
            [56.2810137018451, 43.9790198745438],
            [56.2810316119484, 43.9790299280513],
            [56.2810454070746, 43.9790460210726],
            [56.2810566040647, 43.9790681450071],
            [56.2810662977685, 43.9790983213246],
            [56.2810707689142, 43.9791439207288],
            [56.2811726005304, 43.9791546528557],
            [56.2814687734642, 43.9791861624315],
            [56.281720180116, 43.9792116426675],
            [56.282017825552, 43.9792438331553],
            [56.2820252854672, 43.9797051723962],
            [56.282019314407, 43.9798045916624],
            [56.2822289361445, 43.9798367653481],
            [56.2823662004064, 43.9798676166504],
            [56.282426616788, 43.9799011512614],

        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline1);
                    },
                });
                return items;
            },
        }
    );

    // 2 часть
    var myPolyline2 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.2789927402624, 43.9740100820705],
            [56.2791009131073, 43.9745009225127],
            [56.2791553837206, 43.9750226109787],
            [56.2792471363617, 43.9753350946558],
            [56.2792710129465, 43.9753471559984],
        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // 3 часть
    var myPolyline3 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.2848898544708, 43.9757698624437],
            [56.2848607574242, 43.9763679859443],
            [56.2850584321263, 43.9763706846803],
            [56.2851680891974, 43.9763277624052],
            [56.2851927030805, 43.9763009441633],
            [56.2852329794025, 43.9762110842385],
            [56.2852784806011, 43.9761252477851],
            [56.2853030985628, 43.976097087333],
            [56.2853284641092, 43.9760997727016],
        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // 4 часть
    var myPolyline4 = new ymaps.Polyline(
        [
            // Указываем координаты вершин.
            [56.2853486038553, 43.9763599508293],
            [56.2851561460301, 43.9763693322491],
            [56.2850559654224, 43.9763694827828],
            [56.2849927246471, 43.9763697813891],
            [56.284922608109, 43.9763684393876],
            [56.284862930671, 43.976367097386],
            [56.2848472702975, 43.976674208556],
        ],
        [],

        {
            // Задаем опции геообъекта.
            // Цвет с прозрачностью.
            strokeColor: "#F28123",
            // Ширину линии.
            strokeWidth: 3,
            // Максимально допустимое количество вершин в ломаной.
            editorMaxPoints: 6,
            // Добавляем в контекстное меню новый пункт, позволяющий удалить ломаную.
            editorMenuManager: function (items) {
                items.push({
                    title: "Удалить линию",
                    onClick: function () {
                        myMap.geoObjects.remove(myPolyline2);
                    },
                });
                return items;
            },
        }
    );

    // Обозначение начала маршрута
    var startPoint = new ymaps.Placemark(
        [56.2824303484431, 43.9798280204902],
        {
            hintContent: "Начало экотропы",
            //   balloonContent: `Начало экотропы`,
        },
        {
            iconLayout: "default#image",
            iconImageHref: "https://i.ibb.co/Z2wRNPF/map-marker.png",
            iconImageSize: [32, 51],
            iconImageOffset: [-10, -45],
        }
    );

    // Обозначение конца маршрута
    var endPoint = new ymaps.Placemark(
        [56.282426616788, 43.9799011512614],
        {
            hintContent: "Конец экотропы",
            ////balloonContent: "Это конец экотропы",
        },
        {
            iconLayout: "default#image",
            iconImageHref: "2",
            iconImageSize: [15, 15],
            iconImageOffset: [0, 0],
        }
    );

    // Добавляем линии на карту.
    myMap.geoObjects.add(myPolyline1).add(myPolyline2).add(myPolyline3).add(myPolyline4).add(startPoint).add(endPoint);

});

//Геолокация пользователя//
function init() {
    var geolocation = ymaps.geolocation,
        myMap = new ymaps.Map(
            "map",
            {
                center: [55, 34],
                zoom: 10,
            },
            {
                searchControlProvider: "yandex#search",
            }
        );

    // Сравним положение, вычисленное по ip пользователя и
    // положение, вычисленное средствами браузера.
    geolocation
        .get({
            provider: "yandex",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Красным цветом пометим положение, вычисленное через ip.
            result.geoObjects.options.set("preset", "islands#redCircleIcon");
            result.geoObjects.get(0).properties.set({
                balloonContentBody: "Мое местоположение",
            });
            myMap.geoObjects.add(result.geoObjects);
        });

    geolocation
        .get({
            provider: "browser",
            mapStateAutoApply: true,
        })
        .then(function (result) {
            // Синим цветом пометим положение, полученное через браузер.
            // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.
            result.geoObjects.options.set("preset", "islands#blueCircleIcon");
            myMap.geoObjects.add(result.geoObjects);
        });
}
